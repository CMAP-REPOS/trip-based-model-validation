<!DOCTYPE html>

<!-- jquery and bootstrap scripts -->
<script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  </meta>
  <title> CMAP Trip-Based Model</title>

  <link href="css/chordStyles.css" rel="stylesheet">
  </link>
  <link rel="stylesheet" href="css/mapstyle.css">
  </link>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" crossorigin="">
  </link>
  <link rel="stylesheet" type="text/css" href="css/style.css" />
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

</head>

<body style="height:100%">
  <div>
    <div>
      <!-- Header -->
      <div>
        <nav class="navbar navbar-default navbar-fixed-top" id="header" style="padding-top:10px; padding-right:10px; padding-bottom:5px; z-index:9999">
          <div class="container-fluid">
            <a class="navbar-brand" href="https://www.cmap.illinois.gov/" target="_blank">
              <img src='data/images/cmap_shortid_margins_RGB-01-01.png' height="30px">
            </a>
            <h3 class="navbar-text">Trip-Based Model Validation Report</h3>
            <p class="navbar-text navbar-right">Under development </p>
          </div>
        </nav>

        <nav class="navbar navbar-inverse navbar-fixed-top" style="margin-bottom:0px">
          <div class="container-fluid" style="margin-top: 70px">
            <ul class="nav navbar-nav">
              <li class="active">
                <a href="#1" role="tab" data-toggle="tab">
                  Introduction
                </a>
              </li>
            </ul>
            <ul class="nav navbar-nav">
              <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                  Calibration
                  <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">

                  <li>
                    <a class="calibration" href="#pop1" role="tab" data-toggle="tab">
                      Population Synthesis
                    </a>
                  </li>
                  <li>
                    <a class="calibration" href="#pop2" role="tab" data-toggle="tab">
                      Vehicle Ownership
                    </a>
                  </li>
                  <li>
                    <a class="hhcalmap" class="calibration" href="#pop3" role="tab" data-toggle="tab">
                      Household Attributes
                    </a>
                  </li>
                </ul>
                </li>
            </ul>
          </div>
        </nav>

      </div>

      <!-- Page Content -->
      <div class="tab-content">
        <!-- Intro page -->
        <div id="1" class="tab-pane active container-fluid">
          <div class="row">
            <div class="col-md-1"></div> 
            <div class="col-md-7">
              <h2>Introduction</h2>
            </div>
          </div> 
          <br>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8">
              <div class="colborder"></div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-2">
              <h3>CMAP Modeling Area and Network</h3>
              <div id="intromaplegend"></div><br>
              <p class="small">The modeling area extends beyond the 7-county CMAP region to include 21 counties. Only portions of Lee, Ogle, and LaSalle counties are included in the modeling area.  </p>
              <button type="button" class="btn btn-default btn-xs" id="introrecenter" value="Re-center map" onClick="zoomTo(center,regionmap)">Recenter Map</button>
            </div>
            <div class="col-md-6">
              <div id="regionmap"></div>
            </div> 
          </div> 
          <br>
          <br>
        </div>

      <!-- Calibration -->
        <!-- Population Section -->
        <div id="pop1" class="tab-pane container-fluid">
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-7">
              <h2>Population Synthesis</h2>
              <p>
                Using Census data and other socioeconomic information, a complete set of households for the CMAP modeling area is developed. 
                This dataset contains all of the relevant attributes about each household and for each individual living in those households. 
                While this population is statistically representative of the Census data, the actual households and individuals are “synthetic” 
                in that they do not represent identifiable people and an individual household in the Census data may 
                be replicated numerous times in order to generate a complete distribution of households in the modeling inputs.
              </p>
              <p>
                The current population synthesis software used by CMAP is PopulationSim. The socioeconomic data developed from CMAP’s regional forecasting 
                and Local Area Allocation procedures provide the subzone-level control values for all <dfn
                  data-info="ON TO 2050 is the region's long-range comprehensive plan, adopted in October 2018">ON TO 2050</dfn>
                model scenarios. You can see how well the synthetic population matches the controls at the PUMA level in the <a class="hhcalmap" href="#pop3" data-toggle="tab">Household Attributes</a> page.  
              </p>

              Data note: Currently, observed counts include full PUMAs that are only partially within the modeling area, so the observed total count is slightly greater than the model count.
            </div><!-- end -->
          </div><!-- row end -->
          <br>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8">
              <div class="colborder"></div>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-md-1">
            </div>
            <div class="col col-md-2">
              <h3>Households by Size</h3>
              <br>
              <div id="hhlegend"></div><!-- end -->
              <img src="data/images/Cursor-Click-2-icon.png" width="20px">
              <span class="small">Hover over household size categories to reveal details.</span>
            </div> <!-- end -->
            <div class="col-md-6">
              <div id="HouseholdSize" width="100%"></div><!-- end -->
            </div> <!-- end -->
            <div class="col col-md-2">
            </div>
          </div> <!-- end row-->

          <div class="row">
            <div class="col-md-1"></div> <!-- end -->
            <div class="col-md-8">
              <div class="colborder"></div>
            </div>
          </div>

          <div class="row">
            <div class="col col-md-1">
            </div>
            <div class="col-md-2">
              <h3>Household Characteristics</h3>
              <h5>Households by <span id="hhtitle"></span>
              </h5>
              <br><br>
              <select id="catPopSyn">
                <option value="age">Head of Household Age</option>
                <option value="workers">Household Workers</option>
                <option value="income">Household Income</option>
                <option value="size">Household Size</option>
              </select><!-- end -->
              <br><br>
              <div id="pumsLegend"></div>
              <br>
              <br>
              <p class="small">
                 Income is in 2019 dollars.

              </p>
            </div><!-- end -->
            <div class="col-md-6">
              </h4><!-- end -->
              <div id="PurposeChartpums"></div><!-- end -->
            </div><!-- end -->
            <div class="col col-md-2">
            </div>
          </div> <!-- end -->
          <br>
          <div class="row">
            <div class="col-md-1"></div> <!-- end -->
            <div class="col-md-8">
              <div class="colborder"></div>
            </div>
          </div>
          <div class="row">
            <div class="col col-md-1">
            </div>
            <div class="col-md-2">
              <h3>Household Detail</h3>
              <h5>Distribution of Adults Per Household by <div id="popcttitle"></div>
              </h5>
              <br>
              <select id="popsyn_ct">
                <option value="children">Children</option>
                <option value="workers">Workers</option>
              </select>
              <br>
              <br>
              <div id="stackedAdultLegend"></div>
              <br>
            </div>
            <div class="col col-md-6">
              <div id="popsyncrosstab"></div>
            </div>
            <div class="col col-md-2">
            </div>
          </div>
        </div>
        <!--end tab-->
        <!-- Auto Counts -->
        <div id="pop2" class="tab-pane container-fluid">
          <div class="row">
            <!--Auto Counts-->
            <div class="col-md-1"></div>
            <!--end-->
            <div class="col-md-7">
              <h2>Vehicle Ownership</h2>
              <p>
                  Vehicle ownership plays an important role in individuals’ travel behavior decisions and helps define the set of travel mode options available to them. For example, households that own no vehicles may be dependent on transit to make their trips. Note that vehicle ownership refers to motor vehicles owned or leased by a household, including autos, pickup trucks, SUVs and motorcycles.
              </p>
              <br>
            </div>
          </div> <!-- end row -->
          <div class="row">
            <div class="col-md-1"></div>
            <!-- <div class="col-md-2"></div> end -->
            <div class="col-md-8">
              <div class="colborder"></div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-2">
              <h3>Number of Households by Vehicles Owned</h3>
              Total Households: <span class="modtotal"></span> Model, <span class="surveytotal"></span> Observed
                <h5>Households by <span id="vehtitle"></span>
                </h5>
                <select id="catveh">
                  <option value="veh">Vehicles in Household</option>
                  <option value="veh2">Vehicles in HH (sub-model)</option>
                </select><!-- end -->
                <br><br>
                <div id="autoLegend"></div>
                <p class="small">
                   Income is in 2019 dollars.
  
                </p>
            </div>
            <div class="col-md-6">
              <div id="aochart"></div><!-- end -->
            </div>
            <div class="col col-md-2">
            </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <!-- <div class="col-md-2"></div> end -->
            <div class="col-md-8">
              <div class="colborder"></div>
            </div>
          </div>
          <div class="row">
            <br>
            <div class="col-md-1"></div>
            <div class="col-md-2">
              <!-- <h3>Auto Sufficiency</h3> -->
              <h3>Distribution of Vehicle Ownership by <div id="dtitle"></div>
              </h3>
              PopulationSim Model<br><br>
              Total Households: <span class="modtotal"></span> Model, <span class="surveytotal"></span> Observed
              <br><br>
              <select id="aoCat">
                <option value="size">Household Size</option>
                <option value="income">Household Income</option>
                <option value="workers">Household Workers</option>
              </select>
              <br>
              <div id="stackedAutoLegend"></div>
              <p class="small">
                Income is in 2019 dollars.

             </p>
            </div>
            <div class="col col-md-6">
              <div id="stackedbar"></div>
            </div>
            <div class="col col-md-2">
            </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <!-- <div class="col-md-2"></div> end -->
            <div class="col-md-8">
              <div class="colborder"></div>
            </div>
          </div>
          <div class="row">
            <br>
            <div class="col-md-1"></div>
            <div class="col-md-2">
              <!-- <h3>Auto Sufficiency</h3> -->
              <h3>Distribution of Vehicle Ownership by <div id="dtitlesm"></div>
              </h3>
              Vehicle Availability Sub-Model<br><br>
              Total Households: <span class="modtotal"></span> Model, <span class="surveytotal"></span> Observed
              <br><br>
              <select id="aoCatsm">
                <option value="size">Household Size</option>
                <option value="income">Household Income</option>
                <option value="workers">Household Workers</option>
              </select>
              <br>
              <div id="stackedAutoLegendsm"></div>
              <p class="small">
                Income is in 2019 dollars.

             </p>
            </div>
            <div class="col col-md-6">
              <div id="stackedbarsm"></div>
            </div>
            <div class="col col-md-2">
            </div>
          </div>
        </div>
                <!-- Household Validation -->
                <div id="pop3" class="tab-pane  container-fluid" style="min-height:80vh">
                  <div class="row">
                    <div class="col-md-1"></div>
                    <div class="col-md-6">
                      <h2>Synthetic Household Results</h2>
                      <p>
                        This map displays the difference between modeled and observed data for controlled attributes in the population synthesis process summarized by U.S. Census Public Use Microdata Areas (PUMAs).  PUMAs are geographic areas defined by the U.S. Census Bureau that contain a minimum of 100,000 people.
                        </p>
                            </div>
                  </div>
                  <div class="row">
                    <div class="col-md-1"></div>
                    <div class="col-md-8">
                      <div class="colborder"></div>
                    </div>
                  </div>
                  <br><br>
                  <div class="row">
                    <div class="col-md-1"></div>
                    <div class="col-md-2">
                        <h3>Attribute: <span id="hhmaptitle">1-person households</span></h3>
                      <br>
                      <p>
                        Choose from household size, household income, population segment, householder age, or building type by clicking the category button and making a selection in the dropdown. Hover over each PUMA to display the values for modeled and observed data.  </p>
                      <button type="button" class="btn btn-default btn-xs" id="introrecenter" value="Re-center map" onClick="zoomTo(center,map1)" style="margin-left: 0px">Recenter Map</button>
        
                      <br><br>
        
                    </div>
                    <div class="col-md-6" id="hhvalbuttons">
                      <div class="btn-group" role="group">
                        <div class="btn-group" role="group">
                          <button type="button" id="hhval1" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Household Size
                          </button>
                          <ul class="dropdown-menu" aria-labelledby="hhval1">
                            <li><a class="dropdown-item">1-person households</a></li>
                            <li><a class="dropdown-item">2-person households</a></li>
                            <li><a class="dropdown-item">3-person households</a></li>
                            <li><a class='dropdown-item'>4-person households</a></li>
                            <li><a class='dropdown-item'>5-person households</a></li>
                            <li><a class='dropdown-item'>6-person households</a></li>
                            <li><a class='dropdown-item'>7+-person households</a></li>
                          </ul>
                        </div>
                      </div>
                      <div class="btn-group" role="group">
                        <div class="btn-group" role="group">
                          <button type="button" id="hhval2" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Household Income
                          </button>
                          <ul class="dropdown-menu" aria-labelledby="hhval2">
                            <li><a class='dropdown-item'>Household income <30k</a></li>
                            <li><a class='dropdown-item'>Household income 30k - 60k</a></li>
                            <li><a class='dropdown-item'>Household income 60k - 100k</a></li>
                            <li><a class='dropdown-item'>Household income > 100k</a></li>
                          </ul>
                        </div>
                      </div>
                      <div class='btn-group' role='group'>
                        <div class='btn-group' role='group'>
                          <button type='button' id='hhval2' class='btn btn-default dropdown-toggle' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>
                            Population
                          </button>
                          <ul class='dropdown-menu' aria-labelledby='hhval2'>
                            <li><a class='dropdown-item'>Adults</a></li>
                            <li><a class='dropdown-item'>Workers</a></li>
                            <li><a class='dropdown-item'>Children</a></li>
                            <li><a class='dropdown-item'>White Non-Hispanic</a></li>
                            <li><a class='dropdown-item'>Black Non-Hispanic</a></li>
                            <li><a class='dropdown-item'>Asian Non-Hispanic</a></li>
                            <li><a class='dropdown-item'>Other Non-Hispanic</a></li>
                            <li><a class='dropdown-item'>Hispanic</a></li>
                          </ul>
                        </div>
                      </div>
                      <div class='btn-group' role='group'>
                        <div class='btn-group' role='group'>
                          <button type='button' id='hhval2' class='btn btn-default dropdown-toggle' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>
                            Householder Age
                          </button>
                          <ul class='dropdown-menu' aria-labelledby='hhval2'>
                            <li><a class='dropdown-item'>less than 35</a></li>
                            <li><a class='dropdown-item'>35-64</a></li>
                            <li><a class='dropdown-item'>greater than 64</a></li>
                          </ul>
                        </div>
                      </div>
                      <div class='btn-group' role='group'>
                        <div class='btn-group' role='group'>
                          <button type='button' id='hhval2' class='btn btn-default dropdown-toggle' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>
                            Building Type
                          </button>
                          <ul class='dropdown-menu' aria-labelledby='hhval2'>
                            <li><a class='dropdown-item'>Mobile home or trailer</a></li>
                            <li><a class='dropdown-item'>One-family detached</a></li>
                            <li><a class='dropdown-item'>One-family attached</a></li>
                            <li><a class='dropdown-item'>2 Apartments</a></li>
                            <li><a class='dropdown-item'>3-4 Apartments</a></li>
                            <li><a class='dropdown-item'>5-9 Apartments</a></li>
                            <li><a class='dropdown-item'>10-19 Apartments</a></li>
                            <li><a class='dropdown-item'>20-49 Apartments</a></li>
                            <li><a class='dropdown-item'>50+ Apartments</a></li>
                            <li><a class='dropdown-item'>Boat, RV, van, etc.</a></li>
                          </ul>
                        </div>
                      <br />
                    </div>
                    <div id="hhvalidationmap"></div>
                  </div>
                  </div>
                  </div>
                  <br><br>
        <!-- Trip Mode -->
        <div id="2" class="tab-pane container-fluid">
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-7">
              <h2>Trips by Mode</h2>
              <br>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-md-1"></div>
            <!-- <div class="col-md-2"></div> end -->
            <div class="col-md-8">
              <div class="colborder"></div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col col-md-2">
              <h3>Trips by Mode</h3>
              <svg id="modelegend" style="height:300px"></svg>
              <br />
              <div class="small">
                See more about transit in the <a href="#4" role="tab" data-toggle="tab">Transit</a> tab. <br>
                  <img src="data/images/Cursor-Click-2-icon.png" width="20px">
                  <span>Hover over bars to compare trips by mode.</span>
                <br><br>
              </div>
            </div>
            <div class="col col-md-6">

              <div id="stackedmode"></div>
            </div>

          </div>

          <div class="row">
            <div class="col-md-1"></div> <!-- end -->
            <div class="col-md-8">
              <div class="colborder"></div>
            </div>
          </div>
          <div class="row">
            <div class="col col-md-1">
            </div>
            <div class="col col-md-2">
              <!-- <div class="colborder"></div>end -->
              <h3>Trips by Person Type and Mode</h3>
              <br>
              <p>
                <span id="tripspersonmode_p"></span>
                of all trips</p>
              <select id="catModePer">
                <option value="All">All</option>
                <option value="Full-time worker">Full-time Worker</option>
                <option value="Part-time worker">Part-time Worker</option>
                <option value="Non-worker">Non worker</option>
                <option value="Retired">Non-working senior</option>
                <option value="Child too young for school">Preschool</option>
                <option value="Student of driving age">Student 16+</option>
                <option value="Student of non-driving age">Student under 16 years</option>
                <option value="University student">University Student</option>
              </select>
              <div id="tripspersonLegend"></div>
              <div class="small" style="margin-top: 20px;">
                Individual trips only. <br>
              </div><br>
            </div>
            <div class="col col-md-6">
              <!-- <div class="colborder"></div>end -->

              <div id="ModebyPerson"></div>
            </div>

          </div>

          <div class="row">
            <div class="col-md-1"></div> <!-- end -->
            <div class="col-md-8">
              <div class="colborder"></div>
            </div>
          </div>
          <div class="row">
            <div class="col col-md-1">
            </div>
            <div class="col col-md-2">
              <h3>Trips by Household Income and Mode</h3>
              <br>
              <p>
                <span id="tripsincomemode_p"></span>
                of all trips</p>
              <select id="catModeInc">
                <option value="All">All</option>
                <option value="Less than $35k">Less than $35k</option>
                <option value="$35k to $50k">$35k to $50k</option>
                <option value="$50k to $75k">$50k to $75k</option>
                <option value="$75k to $100K">$75k to $100K</option>
                <option value="More than $100k">More than $100k</option>
              </select>
              <div id="tripsbyincomeLegend"></div><br><br>
              <div class="small">
                  Income is in 2007 dollars.
              </div>
            </div>
            <div class="col col-md-6">

              <div id="ModebyIncome"></div>
            </div>

          </div>

          <div class="row">
            <div class="col-md-1"></div> <!-- end -->
            <div class="col-md-8">
              <div class="colborder"></div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div> <!-- end -->
            <div class="col col-md-2">
              <!-- <div class="colborder"></div>end -->
              <h3>Trips by Purpose and Mode</h3>
              <br>
              <p>
                <span id="tripspurposemode_p"></span>
                of all trips</p>
              <select id="catModePurp">
                <option value="All">All</option>
                <option value="Discretionary">Discretionary</option>
                <option value="Eating Out">Eating Out</option>
                <option value="Escort">Escort</option>
                <option value="Maintenance">Maintenance</option>
                <option value="School">School</option>
                <option value="Shop">Shop</option>
                <option value="University">University</option>
                <option value="Visiting">Visiting</option>
                <option value="Work">Work</option>
                <option value="Work-based">Work-based</option>
              </select>

              <div id="tripspurposemodeLegend"></div>
              
            </div>
            <div class="col col-md-6">
              <!-- <div class="colborder"></div>end -->

              <div id="ModeByPurpose"></div>
            </div>
          </div>
        </div>

        <!-- Work Flows -->
        <div id="3" class="tab-pane  container-fluid">
          <div class="row">
            <div class="col-md-1"></div> <!-- end -->
            <div class="col-md-6">
              <h2>Work Flows</h2>
              <p>
                Commute trips are an important part of a region’s overall travel pattern and are a key component of
             congestion experienced on the transportation system, especially during the morning and evening hours. 
             Ensuring that commuters are traveling between the appropriate home and work locations is one important way
             to verify that travel demand models reflect actual travel patterns.   <br><br>

                Note there are two sources for observed data on this page. The first three tables use data from journey-to-work flows from the Census
                Transportation Planning Package (CTPP). The remaining two charts use data from household travel surveys. CTPP data is generally used to
                estimate models that address work flows due to the large sample of data included. Data from household travel surveys can be used to supplement
                the journey-to-work information from the CTPP, as travel surveys offer more detailed information about the trips than the Census provides.
              </p>
              <br>
            </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8 colborder"> </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-3">
              <h3>Modeled Journey to Work Flows</h3>
              <br>
            </div>
            <div class="col-md-6">
              <br />
              <table id="modelcountyflow_cal"> </table>
            </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8 colborder"> </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-3">
              <h3>Observed Journey to Work Flows</h3>
              <br>
            </div>
            <div class="col-md-6">
              <br />
              <table id="ctppcountyflow_cal"> </table>
            </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8 colborder"> </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-3">
              <h3>Difference Model and Observed Journey to Work Flows</h3>
              <br>
            </div>
            <div class="col-md-5">
              <br />
              <table id="caldiffcountyflow"> </table>
            </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8 colborder"> </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div> <!-- end -->
            <div class="col-md-2" style="text-align:center">
              <br />
              <h3>Origin and Destination Work Flows</h3>
              From
              <!-- Split button -->
              <div class="btn-group" id="workfrom" style="margin:auto;width:auto">
                <button type="button" id="WorkFrom" class="btn btn-danger" style="color: rgb(171, 171, 171); font-size: 18px;">Chicago (CBD)</button>
                <button type="button" class="btn btn-info dropdown-toggle" style="background-color: rgb(207, 207, 207) !important; border-color: rgb(207, 207, 207) !important" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <span class="caret"></span>
                  <span class="sr-only">Toggle Dropdown</span>
                </button>
                <ul class="dropdown-menu">
                  <li><a>All</a></li>
                  <li><a>Chicago (CBD)</a></li>
                  <li><a>Chicago (North)</a></li>
                  <li><a>Chicago (South)</a></li>
                  <li><a>Chicago (West)</a></li>
                  <li><a>Cook (North)</a></li>
                  <li><a>Cook (South)</a></li>
                  <li><a>Cook (West)</a></li>
                  <li><a>DuPage</a></li>
                  <li><a>Kane</a></li>
                  <li><a>Kendall</a></li>
                  <li><a>Lake</a></li>
                  <li><a>McHenry</a></li>
                  <li><a>Will</a></li>
                </ul>
              </div>
              <br>
              To &nbsp;&nbsp;&nbsp;
              <!-- Split button -->
              <div class="btn-group" id="workto">
                <button type="button" id="WorkTo" class="btn btn-danger" style="color: rgb(171, 171, 171); font-size: 18px;">Chicago (CBD)</button>
                <button type="button" class="btn btn-info dropdown-toggle" style="background-color: rgb(207, 207, 207) !important; border-color: rgb(207, 207, 207) !important" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <span class="caret"></span>
                  <span class="sr-only">Toggle Dropdown</span>
                </button>
                <ul class="dropdown-menu">
                    <li><a>All</a></li>
                    <li><a>Chicago (CBD)</a></li>
                    <li><a>Chicago (North)</a></li>
                    <li><a>Chicago (South)</a></li>
                    <li><a>Chicago (West)</a></li>
                    <li><a>Cook (North)</a></li>
                    <li><a>Cook (South)</a></li>
                    <li><a>Cook (West)</a></li>
                    <li><a>DuPage</a></li>
                    <li><a>Kane</a></li>
                    <li><a>Kendall</a></li>
                    <li><a>Lake</a></li>
                    <li><a>McHenry</a></li>
                    <li><a>Will</a></li>
                </ul>
              </div>

              <br>
              <div id="wflowinfocontainer" style="display:inline-block">
                <div id="wflowinfo" style="margin-left:20px;"></div>
                <div id="wflowinfo2" style="margin-left:20px;"></div>
              </div><br><br>
              <div id="wflowmap"></div>
              <br>
              <div style="text-align:left">
                <button type="button" class="btn btn-default btn-xs" id="wrecenter" value="Re-center map" onClick="zoomTo(center,wflowmap)">Recenter Map</button>
                <img src="data/images/Cursor-Click-2-icon.png" width="20px">
                <span class="small" style="text-align:left">Hover over the chord diagram to see area boundaries on the map. Click on the map to see area name. Choose work flow geographies in the drop down menu to view numerical values for work
                  trips.</span>
              </div>
            </div>
            <div class="col col-md-6">
            <div class="col col-md-6" align="center">
              <br />
              <h3>Modeled</h3>
              <br />
              <br />
              <div id="modelChord"></div>
            </div>
            <div class="col col-md-6" align="center">
              <br />
              <h3>Observed</h3>
              <br />
              <br />
              <div id="obsChord"></div>
            </div>
            </div>
            <div class="col col-md-2">
            </div>
          </div>
          <!--- Row End -->
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8 colborder"> </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8 colborder"> </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col col-md-2">
              <h3>Work Trips by Mode and Distance</h3>
              <br>
              <p>
                <span id="worktripsmodedistance_p"></span>
                of all work trips</p>

              <select id="catModeDist">
                <option value="all">All Modes</option>
                <option value="sovfree">Drive Alone (non-toll)</option>
                <option value="sovpay">Drive Alone (toll)</option>
                <option value="hov2free">Shared ride 2 (non-toll)</option>
                <option value="hov2pay">Shared ride 2 (toll)</option>
                <option value="hov3">Shared ride 3+</option>
                <option value="transit">Transit</option>
                <option value="walk">Walk</option>
                <option value="bike">Bike</option>
                <option value="taxi">Taxi</option>
              </select>
              <br><br>
              <div id="worktripsdistanceLegend"></div>
              <div class="small" style="margin-top: 20px;">
                Shared ride 3+ toll and non-toll trips are combined due to the small sample of these trips captured by the Travel Tracker Survey.
                <br><br>
              </div>
            </div>
            <div class="col col-md-6">
              <div id="ModeByDistance"></div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8 colborder"> </div>
          </div>
        </div>

        <!-- Transit Trips -->
        <div id="4" class="tab-pane  container-fluid">
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-6">
              <h2>Transit Trips</h2>
              <p>Transit is a vital part of the transportation system in
                northeastern Illinois and more than 600 million transit trips are made annually.
                It is important to properly calibrate such a key travel mode to ensure that the modeled
                transit trips reflect the <dfn data-info="The set of all destinations that can be reached from a location by transit">travel sheds</dfn> actually served by transit.
              </p>
              <br>
              <br>
              <br>
            </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8">
              <div class="colborder"></div><!-- end -->
            </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-2">
              <h3>Modeled vs. Observed Transit Trips Origin and Destination</h3>
              <p>
                  <p class="small"> The scatterplot includes a point for each origin/destination pair. A map of origin/destination areas is shown below, with the CMAP region shaded for reference.
                    </p>
                <b>r<sup>2</sup></b> = <text_div id="transitrs"></text_div>
              </p>
              <div id="transitodmap"></div>
              <br>
              <button type="button" class="btn btn-default btn-xs" id="transitrecenter" value="Re-center map" onClick="zoomTo(center,transitmap)">Recenter Map</button>

            </div>
            <div class="col-md-6">
              <div id="scatter_transit"></div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8">
              <div class="colborder"></div><!-- end -->
            </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col col-md-2">
              <h3>Transit Trips by <span id="transitname"></span></h3>
              <p>Total transit trips: 1.63M Model, <span id="surveytransit"></span> Survey</p>
              <select id="catTranDist">
                <option value="Distance">Distance</option>
                <option value="Income">Income</option>
              </select>
              <br>
              <div id="transitaccessLegend"></div>
              <div class="small" style="margin-top:20px;">
                Distance is the distance of the transit trip that occurred.  Income is in 2007 dollars.
                They survey has fewer total transit trips when viewed by income since not all respondents reported an income value. <br><br>
              </div>
            </div>
            <div class="col col-md-6">
              <div id="TranDist"></div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8">
              <div class="colborder"></div><!-- end -->
            </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col col-md-2">
              <h3>Transit Access</h3>
              <p class="small">
              The Drive to Transit access mode includes individuals parking at transit stations (Park and Ride) and those who are dropped
              off at the station (Kiss and Ride).  The Walk to Transit access mode includes people walking or cycling to get to transit.
              </p>
              <br><br>
              <img src="data/images/Cursor-Click-2-icon.png" width="20px">
              <span class="small">Hover over pie chart to compare transit access.</span>
            </div>
            <div class="col col-md-6">
            <div class="col col-md-6" align="center">
              <h5><b>Modeled Transit Access</b></h5>
              <p style="font-size:small;">CMAP ABM - 2010 Scenario</p>
              <div id="pieTransitModelMode"></div>
            </div>
            <div class="col col-md-6" align="center">
              <h5><b>Observed Transit Access</b></h5>
              <p style="font-size:small;">Travel Tracker Survey, 2007-2008</p>
              <div id="pieTransitSurveyMode"></div>
            </div>
            </div>
          </div>
        </div>


      <!-- Validation -->
        <!-- Household Validation -->
        <div id="5" class="tab-pane  container-fluid" style="min-height:80vh">
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-6">
              <h2>Synthetic Household Validation</h2>
              <p>
                This map displays the difference between modeled and observed data for selected household attributes summarized by U.S. Census Public Use Microdata Areas (PUMAs).  PUMAs are geographic areas defined by the U.S. Census Bureau that contain a minimum of 100,000 people.
                </p>
                    </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8">
              <div class="colborder"></div>
            </div>
          </div>
          <br><br>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-3">
                <h3>Attribute: <span id="hhmaptitle">0-vehicle households</span></h3>
              <br>
              <p>
                Choose from household size, household income, number of workers, and number of vehicles in households by clicking the category button and selecting the specific household type from the dropdown. Hover over each PUMA to display the values for modeled and observed data.  </p>
              <p>
                <b>Example:</b> In the model, 22.7% of households in northeast Lake County are 1-person households. According to PUMS, 27.2% of households in northeast Lake County are 1-person households.
                This is a difference of -4.5 percentage points. </p>
              </p>
              <button type="button" class="btn btn-default btn-xs" id="introrecenter" value="Re-center map" onClick="zoomTo(center,map1)" style="margin-left: 0px">Recenter Map</button>

              <br><br>

            </div>
            <div class="col-md-6" style="width:40%" id="hhvalbuttons">
              <div class="btn-group" role="group">
                <div class="btn-group" role="group">
                  <button type="button" id="hhval1" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Household Size
                  </button>
                  <ul class="dropdown-menu" aria-labelledby="hhval1">
                    <li><a class="dropdown-item">1-person households</a></li>
                    <li><a class="dropdown-item">2-person households</a></li>
                    <li><a class="dropdown-item">3-person households</a></li>
                    <li><a class="dropdown-item">4+ person households</a></li>
                  </ul>
                </div>
              </div>
              <div class="btn-group" role="group">
                <div class="btn-group" role="group">
                  <button type="button" id="hhval2" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Household Income
                  </button>
                  <ul class="dropdown-menu" aria-labelledby="hhval2">
                    <li><a class="dropdown-item">Household income <35k</a> </li> 
                    <li><a class="dropdown-item">Household income 35k - 65k</a></li>
                    <li><a class="dropdown-item">Household income 65k - 100k</a></li>
                    <li><a class="dropdown-item">Household income > 100k</a></li>
                  </ul>
                </div>
              </div>
              <div class="btn-group" role="group">
                <div class="btn-group" role="group">
                  <button type="button" id="hhval3" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Workers in Household
                  </button>
                  <ul class="dropdown-menu" aria-labelledby="hhval3">
                    <li><a class="dropdown-item">0-worker households</a></li>
                    <li><a class="dropdown-item">1-worker households</a></li>
                    <li><a class="dropdown-item">2-worker households</a></li>
                    <li><a class="dropdown-item">3+ worker households</a></li>
                  </ul>
                </div>
              </div>
              <div class="btn-group" role="group">
                <div class="btn-group" role="group">
                  <button type="button" id="hhval4" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Household Vehicles
                  </button>
                  <ul class="dropdown-menu" aria-labelledby="hhval4">
                    <li><a class="dropdown-item">0-vehicle households</a></li>
                    <li><a class="dropdown-item">1-vehicle households</a>
                    </li>
                    <li><a class="dropdown-item">2+ vehicle households</a></li>
                  </ul>
                </div>
              </div>
              <div id="hhvalidationmap"></div>
              <br />
            </div>
            <div class="col col-md-2">
              <div class="container">
                <br />
                <br />
                <br />
                <br />
                <img src="data/images/icons8-add-50.png" class="image">
                <div class="overlay" id ="overlaytext"></div>
              </div>
            </div>
          </div>
        </div>

         <!-- Work FLow Validation -->
         <div id="6" class="tab-pane container-fluid ">
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-6">
              <h2>Commute Trips Validation</h2>
              <p>
                The analysis of commute trips focuses on comparing the patterns of travel from home (place of residence) to work (primary place of work).
              </p>
              <br>
            </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8 colborder"> </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-2">
              <h3>Modeled vs. Observed Journey to Work Flows</h3>
              <p class="small">
                The scatterplot includes a point for each home/work county pair in the modeling area.  Only a portion of Lee, Ogle, and LaSalle counties are included in the model data (refer to map in <a href="#1" role="tab" data-toggle="tab">Introduction</a>).  
                <br><br><dfn
                  data-info="R-squared is calculated to determine the peformance of the model predicability. It is used to compare the regionwide observed and modeled journey to work trips between ring sectors. A value closer to 1.0 indicates a better model."><b>r<sup>2</sup></b></dfn>
                = <text_div id="jtwr2"></text_div>
              </p>
              <br>
              
            </div>
            <div class="col-md-6">
              <div id="scatter_jtw"></div>
            </div>
            <div class="col col-md-2 ">
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8 colborder"> </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-2">
              <h3>Modeled Journey to Work Flows</h3>
              <br>
            </div>
            <div class="col-md-6">
              <br />
              <table id="modelcountyflow"> </table>
            </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8 colborder"> </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-2">
              <h3>Observed Journey to Work Flows</h3>
              <br>
            </div>
            <div class="col-md-6">
              <br />
              <table id="ctpp2012countyflow"> </table>
            </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8 colborder"> </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-2">
              <h3>Difference Model and Observed Journey to Work Flows</h3>
              <br>
            </div>
            <div class="col-md-6">
              <br />
              <table id="valdiffcountyflow"> </table>
            </div>
            <div class="col col-md-2 ">
                <div class="container">
                  <br />
                  <br />
                  <br />
                  <br />
                  <img src="data/images/icons8-add-50.png" class="img-fluid image">
                  <div class="overlay">
                    <p>
                        Almost half of the commute trips in the region originate from Cook County.
                        Whereas the model does a good job of capturing the total commute trips
                        originating from Cook County, it is overestimating the number of these
                        trips that end in Cook County, and underestimating the number of commute
                        trips from Cook to all other counties.
                        The model is underrepresenting the total number
                        of work trips originating from Lake County by 6.6%.
                    </p>
                  </div>
                </div>
              </div>
          </div>
        </div>

        <!-- Highway Assignment -->
        <div id="7" class="tab-pane container-fluid">
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-6">
              <h2>Highway Assignment</h2>
              <p>
                During Highway Assignment, the individual motor vehicle trips developed by the ABM are routed along the model transportation network from origin to destination in order to estimate traffic flows and network conditions.  As additional vehicles attempt to use the same roadway segments during the assignment, travel becomes more congested and travel times increase.  The assignment procedures implement a series of steps moving various portions of traffic onto alternative routes in an attempt to reduce congestion and minimize travel costs.  Equilibrium is reached within the highway assignment when vehicles cannot change paths without negatively impacting travel times.  Once equilibrium is reached, the volume of vehicles on each roadway segment is retained and can be used to calculate standard measures such as vehicle miles of travel (VMT).
            </p>
              <br>
            </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8 colborder"></div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-3">
              <h3>Daily VMT Shares by County</h3>
            </div>
            <div class="col-md-5">
              <br>
              <table id="vmt_county_tbl"></table>
            </div>
            <div class="col col-md-2">
              <div class="container">
                <br />
                <br />
                <br />
                <br />
                <img src="data/images/icons8-add-50.png" class="image">
                <div class="overlay">
                  <p>
                    In general, the model underestimates the total VMT for the 7-county region (160 million VMT vs. 167 million VMT). However, the VMT shares by county are very similar between the modeled and observed data. Counties with less VMT – like Kendall and McHenry – have very similar modeled vs. observed VMT shares, while Cook County accounts for 53.3% of modeled VMT and 50% of observed VMT.  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8 colborder"></div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-3">
              <h3>Daily VMT Shares by County and Facility Type</h3>
              <br />
              <div id="vmtfacilityLegendNew"></div>
              <br />
            </div>
            <div class="col-md-5">
              <center>
                <div id="cfstack"></div>
              </center>
            </div>
            <div class="col col-md-2">
              <div class="container">
                <br />
                <br />
                <br />
                <br />
                <img src="data/images/icons8-add-50.png" class="image">
                <div class="overlay">
                  <p>
                    The model does a good job of predicting the VMT shares by facility type for a few areas, including Suburban Cook and DuPage Counties.  The share of modeled vs observed VMT on local roads is almost identical for these two areas.  In Lake County, the model is overestimating the amount of VMT on interstates and underestimating the VMT on arterial streets.  In Chicago, the model is slightly underestimating the VMT on arterial streets.  In general, the share of modeled and observed VMT on arterials is lower in the City of Chicago, Suburban Cook County, DuPage County and Will County. 
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8 colborder"></div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-3">
              <h3>Modeled vs. Observed Average Daily Link Volumes</h3>
              <br>
              <div id="scatterLegend"></div>
              <p><b>r<sup>2</sup></b> = <text_div id="r2"></text_div>
              </p>
            </div>
            <div class="col-md-5">
              <div id="scatter_vmt"></div>
            </div>
            <div class="col col-md-2 ">
                <div class="container">
                  <br />
                  <br />
                  <br />
                  <br />
                  <img src="data/images/icons8-add-50.png" class="img-fluid image">
                  <div class="overlay">
                    <p>
                      The scatterplot shows a strong correlation between the observed average daily link volume
                      and the modeled daily link volume, which is verified with an r-squared value of 0.86. A value
                      of 0.86 means that the regression line shown is a good fit of the observed data and accounts
                      for 86% of the variation in the data.
                      The correlation between the observed and modeled average daily link volumes is stronger for
                      interstates than for arterials/collectors.
                    </p>
                  </div>
                </div>
              </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8 colborder"></div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-3">
              <h3>Daily VMT By Interstate</h3>
              <p class=small>This comparison examines vehicles separated into two categories: auto
                (which includes cars, SUVs, pickup trucks, etc. that people drive for their
                personal use) and commercial vehicles (which include package delivery trucks
                all of the way up to tractor-trailers) used to conduct business activities.</p>

                <p class=small>
                  Truck volumes on I-190 not shown due to bar scale. Model and observed values equals 11,512 and 9,917 respectively.
                </p>
              <div id="hwyvmtLegend"></div>
              <div id="interstate_map"></div><br>
              <br>
              <button type="button" class="btn btn-default btn-xs" id="wrecenter" value="Re-center map" onClick="zoomTo(center,interstate_map)">Recenter Map</button><br />
              <img src="data/images/Cursor-Click-2-icon.png" width="12px">
              <span class="small">Hover over bars to display values and highlight segment on map. Click on a highway segment on the map to show the name.</span>
            </div>
            <div class="col-md-5">
            <div class="col-md-6" style="text-align:center">
              <br>
              <br>
              <h4>Auto</h4>
              <div id="autohwyassignment"></div>
            </div>
            <div class="col-md-6" style="text-align:center">
              <br>
              <br>
              <h4>Truck</h4>
              <div id="truckhwyassignment"></div>
            </div>
            </div>
            <div class="col col-md-2 ">
                <div class="container">
                  <br />
                  <br />
                  <br />
                  <br />
                  <img src="data/images/icons8-add-50.png" class="img-fluid image">
                  <div class="overlay">
                    <p>
                      The model over predicts the amount of weekday traffic on the interstate system. Separating the VMT into auto and commercial vehicle components shows that truck tollway freeway volumes are over estimated in the compared to the observed data. Overall, modeled auto volumes show a closer relationship to the observed data for both freeways and tollways.
                    </p>
                  </div>
                </div>
              </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8 colborder"></div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-3">
              <h3>Daily VMT by Volume Range</h3>
              <br />
            </div>
            <div class="col-md-5">
                <br />
                <br />
                <table id="vrange_consolidated"></table>
            </div>
            <div class="col col-md-2 ">
                <div class="container">
                  <br />
                  <br />
                  <br />
                  <br />
                  <img src="data/images/icons8-add-50.png" class="img-fluid image">
                  <div class="overlay">
                    <p>
                        This analysis compares modeled volumes to links that have observed traffic
                        counts on them.  Overall the model is overestimating traffic on these links
                        by less than 2%, an extremely close margin.  VMT on the lowest volume roads
                        are being overestimated, while VMT is underestimated by the model on the highest
                        volume road segments.  For the five categories from 5,000 up to 59,999 the model
                        is overestimating VMT by less than 9%, and for two categories the VMT difference
                        is less than 2%.
                    </p>

                  </div>
                </div>
              </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8 colborder"></div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-3">
              <h3>Root Mean Squared Error Analysis</h3>
              <br />
              <p class="small"> Links were grouped into volume bins based on the observed traffic counts (AADT) and linear regression analyses
                were completed for each group. The root mean squared error (RMSE) is a measure commonly-used for model validation
                analyses and compares the average difference between the observed values and the modeled volume predicted by the
                linear regression. The percent RMSE standardizes the value by dividing it by the average of the AADT. </p>

                <p class="small">
                  Target values represent the standard maximum acceptable root mean squared error from the Florida Department of Transportation, which are often cited as model validation goals.
                </p>
            </div>
            <div class="col-md-5">
              <br />
              <table id="rmse_7"></table>
            </div>
            <div class="col col-md-2 ">
              <div class="container">
                <br />
                <br />
                <br />
                <br /><br />
                <img src="data/images/icons8-add-50.png" class="img-fluid image">
                <div class="overlay">
                  <p>
                      For the lowest volume categories, which contain about 87% of the links measured, the percent RMSE is below the
                      Florida target value.  There is a spike in the 15,000-19,999 category, where the percent RMSE is 8 percentage
                      points higher than the target value.  The higher volume categories also exceed the target value but by smaller
                      amounts.  Overall this analysis shows that the ABM is dong a reasonable job of replicating the observed traffic
                      counts.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>


        <!-- TRANSIT ASSIGNMENT -->
        <div id="8" class="tab-pane container-fluid">
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-6">
              <h2>Transit Assignment</h2>
              <p>The analysis of transit assignment results
                generally focus on comparing the number of transit
                boardings estimated by the model to observed boardings.
                The CMAP model transit network includes the following modes:

                <ul>
                  <li>Heavy Rail – operated by the Chicago Transit Authority (CTA)
                    in Chicago and some surrounding communities.</li>
                  <li>Commuter Rail – operated by Metra throughout
                    the CMAP region.</li>
                  <li>Bus – operated by CTA
                    (in Chicago and some surrounding communities)
                    and by Pace Suburban Bus (in northeastern Illinois,
                    mostly outside of Chicago).</li>
                </ul>
              </p>
              <br>
            </div>
          </div>
          <div class="row">
              <div class="col-md-1"></div>
              <div class="col-md-8">
                <div class="colborder"></div>
                </div>
                </div>
          <div class="row">
            <div class="col-md-1"></div>
              <div class="col-md-3">
                <h3>Transit Boardings by Mode</h3>
                <p class="small">
                  Transit boardings include average weekday
                  boardings for fixed-route service. Demand
                  responsive dial-a-ride, call and ride,
                  or ADA paratransit services are not included.
                </p>
              </div>
              <div class="col-md-5">
                <br />
                <br />
                <table id="railboardings"></table>
              </div>
              <div class="col col-md-2">
                  <div class="container">
                    <br />
                    <br />
                    <br />
                    <br />
                    <img src="data/images/icons8-add-50.png" class="image">
                    <div class="overlay">
                      <p>
                          The model does a good job predicting the average number of weekday boardings for each transit mode.
                          The predicted number of average weekday boardings for heavy rail, buses, and the total are very close
                          to the observed data (all within 4%). The model is slightly underpredicting the number of transit boardings
                          for commuter rail, by about 7%.
                      </p>
                    </div>
                  </div>
                </div>
          </div>
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-8">
              <div class="colborder"></div>
              </div>
              </div>
          <div class="row">
            <div class="col-md-1"></div>
              <div class="col-md-3">
                <h3>Transit Boardings by Line</h3>
                <section class="container" style="display: -webkit-box">
                  <svg id="transitmaplegend" style="padding-top:10px"></svg>
                  <div id="transitboardingLegend"></div>
                </section>
                <div id="transit_map"></div><br>
                <button type="button" class="btn btn-default btn-xs" id="wrecenter" value="Re-center map" onClick="zoomTo(center,transit_map)">Recenter Map</button><br />
                <img src="data/images/Cursor-Click-2-icon.png" width="20px">
                <span class="small">Hover over bars to display values and highlight segment on map.
                  Click on a transit segment on the map to show the name.</span>
              </div>
              <div class="col-md-5">
                <div class="col-md-6" style="text-align:center">
                  <br>
                  <h4>CTA</h4>
                  <div id="transitassignment"></div>
                </div>
                <div class="col-md-6" style="text-align:center">
                  <br>
                  <h4>Metra</h4>
                  <div id="transitassignmentmetra"></div>
                </div>
                </div>
                <div class="col col-md-2">
                    <div class="container">
                      <br />
                      <br />
                      <br />
                      <br />
                      <img src="data/images/icons8-add-50.png" class="image">
                      <div class="overlay">
                        <p>
                            Overall, the model accurately estimates transit boardings by line for both CTA and Metra. The model
                            overpredicts some of the transit boardings (such as the Green Line on the CTA and the BNSF line on Metra),
                            while the model also underpredicts transit boardings on other lines (such as the Brown Line on the CTA and the
                            MD-N line on Metra). However, for the most part, the model does a good job predicting the transit boardings on
                            each CTA and Metra line.
                        </p>
                      </div>
                    </div>
                  </div>
          </div>
        </div>
       
      </div>


      <!-- Footer -->
      <nav class="navbar navbar-inverse navbar-static-bottom" style="margin-bottom: 0px">
        <div class="container-fluid">
          <div id="source">
            <p class="navbar-text navbar-left">
              <script>
                $('a[data-toggle="tab"]').on('shown.bs.tab', function(e) {
                  var target = $(e.target).attr("href"); // activated tab
                  if (target == '#1') {
                    text = ""
                  }
                  if (target == '#pop1') {
                    text = "Observed: PUMS (2014-2018). <br> Modeled: PopulationSim using PUMS (2014-2018) seed."
                  }
                  if (target == '#pop2') {
                    text = "Observed: PUMS (2014-2018). <br> Modeled: PopulationSim using PUMS (2014-2018) seed, Vehicle Availability Sub-Model."
                  }
                  if (target == '#pop3') {
                    text = "Observed: PopulationSim controls developed using 2014-2018 PUMS, 2014-2018 ACS, and 2019 Population Estimates Program data.  <br> Modeled: PopulationSim using PUMS (2014-2018) seed."
                  }
                  if (target == '#2') {
                    text = 'Observed: Travel Tracker Survey, 2007-2008. <br> Modeled: CMAP ABM - 2010 Scenario.<br> The sum of observed trips may vary between charts since survey respondents did not provide information for all questions. '
                  }
                  if (target == '#3') {
                    text = 'Observed: Tables: CTPP (2009-2013), Graphs: Travel Tracker Survey, 2007-2008. <br> Modeled: CMAP ABM - 2010 Scenario.'
                  }
                  if (target == '#4') {
                    text = 'Observed: Travel Tracker Survey, 2007-2008. <br> Modeled: CMAP ABM - 2010 Scenario.<br> The sum of observed trips may vary between charts since survey respondents did not provide information for all questions. '
                  }
                  if (target == '#5') {
                    text = 'Observed: U.S. Census Bureau; American Community Survey (ACS); Five-Year Public Use Microdata Sample (PUMS) 2013-2017 <br> Modeled: CMAP ABM - 2015 Scenario.'
                  }
                  if (target == '#6') {
                    text = 'Observed: CTPP (2012 - 2016). <br> Modeled: CMAP ABM - 2015 Scenario.'
                  }
                  if (target == '#7') {
                    text = 'Observed: Rows 1-2: Illinois Travel Statistics 2015, Rows 3-6: Annual Average Daily Traffic Count Data 2015 <br> Modeled: CMAP ABM - 2015 Scenario.'
                  }
                  if (target == '#8') {
                    text = 'Observed: Regional Transportation Authority Mapping and Statistics (RTAMS, 2015-2016) <br> Modeled: CMAP ABM - 2015 Scenario.'
                  }
                  var textObj = document.getElementsByClassName("navbar-text navbar-left")[0]
                  textObj.innerHTML = text;
                });
              </script>
            </p>
          </div>
          <div class="navbar-text navbar-right"> 
            <a style="margin-right:10px !important" href="https://github.com/CMAP-REPOS/trip-based-model-validation" target="_blank">
            <img src="data/images/GitHub-Mark-Light-32px.png">
            </a>
          </div>
        </div>
      </nav>
      <!-- Footer -->
</body>

<script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js" integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg==" crossorigin=""></script>

<!-- D3 scripts -->
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://d3js.org/d3-format.v1.min.js"></script>

<script src="https://underscorejs.org/underscore-min.js"></script>
<script src="https://rawgit.com/sghall/7859113/raw/422da4401f7d4fc0352a7c49961d24f03716be7a/gistfile1.js"></script>

<!-- map layers -->
<script type="text/javascript" src="data/json/subzonegroups.js"></script>
<script type="text/javascript" src="data/json/hwy_interstates.js"></script>
<script type="text/javascript" src="data/json/counties.js"></script>
<script type="text/javascript" src="data/json/countiesmini.js"></script>
<script type="text/javascript" src="data/json/highways.js"></script>
<script type="text/javascript" src="data/json/MetraLines.js"></script>
<script type="text/javascript" src="data/json/ctalines.js"></script>
<script type="text/javascript" src="data/json/mhn.js"></script>
<script type="text/javascript" src="data/json/cmaparea.js"></script>
<script type="text/javascript" src="data/json/puma2020pctdiff.js"></script>

<!-- chart etc scripts -->
<script src="scripts/scatter_plot.js" type="text/javascript"></script>
<script src="scripts/internallinks_legends.js"></script>
<script src="scripts/workflowdropdown.js"></script>
<script src="scripts/h_barchart.js" type="text/javascript"></script>
<script src="scripts/v_barchart_dropdown.js" type="text/javascript"></script>
<script src="scripts/barchart_dropdown_stack_4.js" type="text/javascript"></script>
<script src="scripts/barchart.js" type="text/javascript"></script>
<script src="scripts/chord2.js" type="text/javascript"></script>
<script src="scripts/barchart_stack.js" type="text/javascript"></script>
<script src="scripts/barchart_stack2.js" type="text/javascript"></script>
<script src="scripts/h_stacked.js" type="text/javascript"></script>
<script src="scripts/modepurposefilter.js" type="text/javascript"></script>
<script type="text/javascript" src='scripts/table.js'></script>
<script type="text/javascript" src="scripts/modepies.js"></script>
<script type="text/javascript" src="scripts/multiline.js"></script>
<!-- calling functions -->
<script>
  makeGroupVBar("data/csv1_pop_syn.csv", "#PurposeChartpums", "#catPopSyn", 2, "popsynDesc", "hhtitle", "pumsLegend");
</script>
<script>
  makeGroupVBar("data/aoCounts.csv", "#aochart", "#catveh", 2, "popsynDesc", "vehtitle", "pumsLegend");
</script>
<script>
  makeGroupVBar("data/csv5_mode_purpose.csv", "#ModeByPurpose", "#catModePurp", 2, "modePurpDesc", "modeTitle", "", "tripspurposemode_p");
</script>
<script>
  makeGroupVBar("data/csv7_work_mode_distance.csv", "#ModeByDistance", "#catModeDist", 2, "modeDistDesc", "modeDTitle", "", "worktripsmodedistance_p");
</script>
<script>
  makeGroupVBar("data/csv9_mode_person.csv", "#ModebyPerson", "#catModePer", 2, "modePerDesc", "modePTitle", "", "tripspersonmode_p");
</script>
<script>
  makeGroupVBar("data/csv10_mode_income.csv", "#ModebyIncome", "#catModeInc", 2, "modeinDesc", "modeITitle", "", "tripsincomemode_p");
</script>
<script>
  makeGroupVBar("data/csv19_transit_distance.csv", "#TranDist", "#catTranDist", 2, "TranDistDesc", "TranDistTitle", "", "transitmodedistance_p");
</script>
<script>
  makeGroupHBar("data/csv34.csv", "#transitassignment", 2, "vmtDesc", "vmtTitle", 600, 'boardings', 1e5, 0);
</script>
<script>
  makeGroupHBar("data/csv35.csv", "#transitassignmentmetra", 2, "vmtDesc", "vmtTitle", 600, 'boardings', 1e5, 300000);
</script>
<script>
  makeScatter("data/raw/link_counts.csv", "#scatter_vmt", "vadt", "AADT", "FacilityType", "r2");
</script>
<script>
  makeScatter("data/csv36_jtw.csv", "#scatter_jtw", "Model", "CTPP", "rs", "jtwr2");
</script>
<script>
  makeScatter("data/csv38_transit_scatter.csv", "#scatter_transit", "Model", "Travel Tracker Survey", "trip_mode", "transitrs");
</script>
<script>
  makeStackedChart_nodd2("data/csv23_vmt_county_facility.csv", "cftitle", "cfstack");
</script>
<script>
  makeStackedChart_nodd2("data/csv33_tour_purposetype.csv", "cftitle", "tourstack");
</script>
<script>
  makeStackedChart_4("data/csv40_PopSyn_CrossTab.csv", "#popsyn_ct", "popcttitle", "popsyncrosstab", "stackedAdultLegend");
</script>
<script>
  makeStackedChart_4("data/csv3_aocrosstab_counts.csv", "#aoCat", "dtitle", "stackedbar", "stackedAutoLegend");
</script>
<script>
  makeStackedChart_4("data/csv3_aocrosstab_counts_submodel.csv", "#aoCatsm", "dtitlesm", "stackedbarsm", "stackedAutoLegendsm");
</script>
<script>
  makeChords('data/csv4_chord.csv', "modelChord", "obsChord");
</script>
<script>
  makeGroupHBar("data/csv50_autovmt.csv", "#autohwyassignment", 2, "vmtDesc", "vmtTitle", 600, 'VMT', 1e6, 0);
</script>
<script>
  makeGroupHBar("data/csv51_truckvmt.csv", "#truckhwyassignment", 2, "vmtDesc", "vmtTitle", 600, 'VMT', 1e6, 4000000);
</script>
<script>
  make_h_stacked("data/csv38_popsyn_person.csv", "PopPersonType", "hlegend")
</script>
<script>
  make_h_stacked("data/csv39_popsyn_hhsize.csv", "HouseholdSize", "hhlegend")
</script>
<script>
  make_h_stacked_tripsbymode("data/csv1314_tripmode.csv", "stackedmode", "modelegend")
</script>
<script>
  make_h_stacked_tripsbymode("data/csv15_16_trippurpose.csv", "stackedactivity", "activitieslegend")
</script>
<script>
  make_h_stacked("data/csv32_tour_persontype.csv", "TourPersonType", "tourlegend")
</script>
<script>
  make_multi_line("rmse_line", "data/rmse.csv")
</script>

<script type="text/javascript" src="data/json/Combined_WGS_Updated.js"></script>
<script type="text/javascript" src="data/json/transitod.js"></script>
<script type="text/javascript" src="scripts/hhvalidationmap.js"></script>
<script type="text/javascript" src="scripts/intromap.js"></script>
<script type="text/javascript" src="scripts/transitodmap.js"></script>
<script type="text/javascript" src="scripts/transit_assignment_map.js"></script>
<script type="text/javascript" src="scripts/highway_assignment_map.js"></script>

<!-- making tables -->
<script>
  d3.csv("data/csv49_calworkflows_diff.csv", function(d, i, columns) {
    for (var i = 1, n = columns.length; i < n; ++i) d[columns[i]] = +d[columns[i]];
    return d;
  }, function(error, data) {
    if (error) throw error;
    tabulate(data, ['Origin', 'Cook County', 'DuPage County', 'Kane County', 'Kendall County', 'Lake County', 'McHenry County', 'Will County', 'External Area', 'Total'], "#caldiffcountyflow", "percent"); // 2 column table
  });
  d3.csv("data/csv47_modelworkflows_cal.csv", function(d, i, columns) {
    for (var i = 1, n = columns.length; i < n; ++i) d[columns[i]] = +d[columns[i]];
    return d;
  }, function(error, data) {
    if (error) throw error;
    tabulate(data, ['Origin', 'Cook County', 'DuPage County', 'Kane County', 'Kendall County', 'Lake County', 'McHenry County', 'Will County', 'External Area', 'Total'], "#modelcountyflow_cal", "nopercent"); // 2 column table
  });
  d3.csv("data/csv48_ctpplworkflows_cal.csv", function(d, i, columns) {
    for (var i = 1, n = columns.length; i < n; ++i) d[columns[i]] = +d[columns[i]];
    return d;
  }, function(error, data) {
    if (error) throw error;
    tabulate(data, ['Origin', 'Cook County', 'DuPage County', 'Kane County', 'Kendall County', 'Lake County', 'McHenry County', 'Will County', 'External Area', 'Total'], "#ctppcountyflow_cal", "nopercent"); // 2 column table
  });

  d3.csv("data/csv46_valworkflows_diff.csv", function(d, i, columns) {
    for (var i = 1, n = columns.length; i < n; ++i) d[columns[i]] = +d[columns[i]];
    return d;
  }, function(error, data) {
    if (error) throw error;
    tabulate(data, ['Origin', 'Cook County', 'DuPage County', 'Kane County', 'Kendall County', 'Lake County', 'McHenry County', 'Will County', 'External Area', 'Total'], "#valdiffcountyflow", "percent"); // 2 column table
  });
  d3.csv("data/csv44_modelworkflows.csv", function(d, i, columns) {
    for (var i = 1, n = columns.length; i < n; ++i) d[columns[i]] = +d[columns[i]];
    return d;
  }, function(error, data) {
    if (error) throw error;
    tabulate(data, ['Origin', 'Cook County', 'DuPage County', 'Kane County', 'Kendall County', 'Lake County', 'McHenry County', 'Will County', 'External Area', 'Total'], "#modelcountyflow", "nopercent"); // 2 column table
  });
  d3.csv("data/csv45_ctpp2012workflows.csv", function(d, i, columns) {
    for (var i = 1, n = columns.length; i < n; ++i) d[columns[i]] = +d[columns[i]];
    return d;
  }, function(error, data) {
    if (error) throw error;
    tabulate(data, ['Origin', 'Cook County', 'DuPage County', 'Kane County', 'Kendall County', 'Lake County', 'McHenry County', 'Will County', 'External Area', 'Total'], "#ctpp2012countyflow", "nopercent"); // 2 column table
  });

  d3.csv("data/csv42_busboardings.csv", function(d, i, columns) {
    for (var i = 1, n = columns.length; i < n; ++i) d[columns[i]] = +d[columns[i]];
    return d;
  }, function(error, data) {
    if (error) throw error;
    tabulate(data, ['Transit Agency', 'Observed', 'Model', 'Diff', 'Percent Diff'], "#busboardings", "percent"); // 2 column table
  });

  d3.csv("data/csv43_railboardings.csv", function(d, i, columns) {
    for (var i = 1, n = columns.length; i < n; ++i) d[columns[i]] = +d[columns[i]];
    return d;
  }, function(error, data) {
    if (error) throw error;
    tabulate(data, ['Mode', 'Observed', 'Model', 'Diff', 'Percent Diff'], "#railboardings", "percent"); // 2 column table
  });

  d3.csv("data/csv29_vmt_county_table.csv", function(d, i, columns) {
    for (var i = 1, n = columns.length; i < n; ++i) d[columns[i]] = +d[columns[i]];
    return d;
  }, function(error, data) {
    if (error) throw error;
    tabulate(data, ['County', 'Observed Share', 'Modeled Share', 'Observed', 'Model'], "#vmt_county_tbl", "percent"); // 2 column table
  });

  d3.csv("data/csv30_vrange_consolidated.csv", function(d, i, columns) {
    for (var i = 1, n = columns.length; i < n; ++i) d[columns[i]] = +d[columns[i]];
    return d;
  }, function(error, data) {
    if (error) throw error;
    tabulate(data, ['Volume Range', 'Number of Links', 'Observed VMT', 'Model VMT', 'Percent Diff'], "#vrange_consolidated", "percent"); // 2 column table
  });

  d3.csv("data/csv30_rmse.csv", function(d, i, columns) {
    for (var i = 1, n = columns.length; i < n; ++i) d[columns[i]] = +d[columns[i]];
    return d;
  }, function(error, data) {
    if (error) throw error;
    tabulate(data, ['Volume Range', 'Links', 'AADT', 'Model Volumes', 'RMSE', '%RMSE', 'Target'], "#rmse_7", "percent"); // 2 column table
  });

  d3.csv("data/csv30_vrange_total.csv", function(d, i, columns) {
    for (var i = 1, n = columns.length; i < n; ++i) d[columns[i]] = +d[columns[i]];
    return d;
  }, function(error, data) {
    if (error) throw error;
    tabulate(data, ['Vrange', 'Number of Links', 'Observed VMT', 'Model VMT', 'Percent Diff'], "#vrange_total", "percent"); // 2 column table
  });

  d3.csv("data/csv30_vrange_art.csv", function(d, i, columns) {
    for (var i = 1, n = columns.length; i < n; ++i) d[columns[i]] = +d[columns[i]];
    return d;
  }, function(error, data) {
    if (error) throw error;
    tabulate(data, ['Vrange', 'Number of Links', 'Observed VMT', 'Model VMT', 'Percent Diff'], "#vrange_art", "percent"); // 2 column table
  });

  d3.csv("data/csv30_vrange_int.csv", function(d, i, columns) {
    for (var i = 1, n = columns.length; i < n; ++i) d[columns[i]] = +d[columns[i]];
    return d;
  }, function(error, data) {
    if (error) throw error;
    tabulate(data, ['Vrange', 'Number of Links', 'Observed VMT', 'Model VMT', 'Percent Diff'], "#vrange_int", "percent"); // 2 column table
  });

  d3.csv("data/csv41_commute_model.csv", function(d, i, columns) {
    for (var i = 1, n = columns.length; i < n; ++i) d[columns[i]] = +d[columns[i]];
    return d;
  }, function(error, data) {
    if (error) throw error;
    tabulate(data, ['Origin', '1', '2', '3', '4', 'External', 'Total'], "#commute_model", "nopercent");
  });

  d3.csv("data/aoCounts.csv", function(d, i, columns) {
    for (var i = 1, n = columns.length; i < n; ++i) d[columns[i]] = +d[columns[i]];
    return d;
  }, function(error, data) {
    if (error) throw error;
    $('.modtotal').text(d3.formatPrefix(".2s", 1e6)(d3.sum(data.map(function(d) {
      return d.Model / 2
    }))))
    $('.surveytotal').text(d3.formatPrefix(".2s", 1e6)(d3.sum(data.map(function(d) {
      return d.Observed / 2
    }))))
  });

</script>

</html>
